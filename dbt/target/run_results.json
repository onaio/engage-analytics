{"metadata": {"dbt_schema_version": "https://schemas.getdbt.com/dbt/run-results/v6.json", "dbt_version": "1.10.9", "generated_at": "2025-08-28T13:55:58.014771Z", "invocation_id": "a483f185-88c2-4ac1-970a-6a736435334b", "invocation_started_at": "2025-08-28T13:55:54.785992Z", "env": {}}, "results": [{"status": "error", "timing": [{"name": "compile", "started_at": "2025-08-28T13:55:57.687985Z", "completed_at": "2025-08-28T13:55:57.728106Z"}, {"name": "execute", "started_at": "2025-08-28T13:55:57.787112Z", "completed_at": "2025-08-28T13:55:57.828555Z"}], "thread_id": "Thread-2 (worker)", "execution_time": 0.1617729663848877, "adapter_response": {}, "message": "Database Error in model stg_patient (models/staging/stg_patient.sql)\n  column \"lastupdated\" does not exist\n  LINE 19:     (lastUpdated::timestamptz)\n                ^\n  HINT:  Perhaps you meant to reference the column \"patient.lastUpdated\".\n  compiled code at target/run/opensrp_mh/models/staging/stg_patient.sql", "failures": null, "unique_id": "model.opensrp_mh.stg_patient", "compiled": true, "compiled_code": "with src as (\n    select\n        id as fhir_id,\n        resource,\n        resource ->> 'id'                  as resource_id,\n        resource -> 'meta' ->> 'versionId' as version_id,\n        resource -> 'meta' ->> 'lastUpdated' as meta_last_updated,\n        resource ->> 'gender'              as gender,\n        resource ->> 'birthDate'           as birth_date,\n        resource ->> 'active'              as active,\n        \n    -- Handle ISO strings from FHIR meta/fields safely\n    (lastUpdated::timestamptz)\n as lastUpdated_ts,\n        _airbyte_extracted_at\n    from \"data_warehouse\".\"airbyte\".\"patient\"\n)\nselect * from src", "relation_name": "\"data_warehouse\".\"engage_analytics_stg\".\"stg_patient\"", "batch_results": null}, {"status": "error", "timing": [{"name": "compile", "started_at": "2025-08-28T13:55:57.702606Z", "completed_at": "2025-08-28T13:55:57.713093Z"}, {"name": "execute", "started_at": "2025-08-28T13:55:57.714095Z", "completed_at": "2025-08-28T13:55:57.834161Z"}], "thread_id": "Thread-3 (worker)", "execution_time": 0.1615290641784668, "adapter_response": {}, "message": "Database Error in model stg_practitioner (models/staging/stg_practitioner.sql)\n  column \"lastupdated\" does not exist\n  LINE 16:     (lastUpdated::timestamptz)\n                ^\n  HINT:  Perhaps you meant to reference the column \"practitioner.lastUpdated\".\n  compiled code at target/run/opensrp_mh/models/staging/stg_practitioner.sql", "failures": null, "unique_id": "model.opensrp_mh.stg_practitioner", "compiled": true, "compiled_code": "select\n    id as fhir_id,\n    resource,\n    resource ->> 'id'                            as resource_id,\n    resource -> 'name' -> 0 ->> 'family'         as family_name,\n    resource -> 'name' -> 0 -> 'given' ->> 0     as given_name,\n    resource -> 'telecom' -> 0 ->> 'value'       as phone_raw,\n    \n    -- Handle ISO strings from FHIR meta/fields safely\n    (lastUpdated::timestamptz)\n          as lastUpdated_ts,\n    _airbyte_extracted_at\nfrom \"data_warehouse\".\"airbyte\".\"practitioner\"", "relation_name": "\"data_warehouse\".\"engage_analytics_stg\".\"stg_practitioner\"", "batch_results": null}, {"status": "error", "timing": [{"name": "compile", "started_at": "2025-08-28T13:55:57.707905Z", "completed_at": "2025-08-28T13:55:57.727620Z"}, {"name": "execute", "started_at": "2025-08-28T13:55:57.771158Z", "completed_at": "2025-08-28T13:55:57.833136Z"}], "thread_id": "Thread-4 (worker)", "execution_time": 0.15265965461730957, "adapter_response": {}, "message": "Database Error in model stg_questionnaire_response (models/staging/stg_questionnaire_response.sql)\n  invalid input syntax for type timestamp with time zone: \"authored\"\n  LINE 28:     (resource ->> 'authored'::timestamptz)\n                             ^\n  compiled code at target/run/opensrp_mh/models/staging/stg_questionnaire_response.sql", "failures": null, "unique_id": "model.opensrp_mh.stg_questionnaire_response", "compiled": true, "compiled_code": "with base as (\n    select\n        id as fhir_id,\n        resource,\n        resource ->> 'id'                          as resource_id,\n        resource ->> 'status'                      as status,\n        resource ->> 'questionnaire'               as questionnaire_canonical,\n        \n    -- ref_text looks like 'Patient/123' -> return '123'\n    (regexp_replace(resource -> 'subject' ->> 'reference', '^\\w+/', ''))\n    as patient_id,\n        \n    -- ref_text looks like 'Patient/123' -> return '123'\n    (regexp_replace(resource -> 'encounter' ->> 'reference', '^\\w+/', ''))\n  as encounter_id,\n        \n    -- ref_text looks like 'Patient/123' -> return '123'\n    (regexp_replace(resource -> 'author' ->> 'reference', '^\\w+/', ''))\n     as author_id,\n        \n    -- Handle ISO strings from FHIR meta/fields safely\n    (resource ->> 'authored'::timestamptz)\n as authored_ts,\n        \n    -- Handle ISO strings from FHIR meta/fields safely\n    (lastUpdated::timestamptz)\n        as lastUpdated_ts,\n        _airbyte_extracted_at\n    from \"data_warehouse\".\"airbyte\".\"questionnaire_response\"\n)\nselect * from base", "relation_name": "\"data_warehouse\".\"engage_analytics_stg\".\"stg_questionnaire_response\"", "batch_results": null}, {"status": "error", "timing": [{"name": "compile", "started_at": "2025-08-28T13:55:57.697706Z", "completed_at": "2025-08-28T13:55:57.726986Z"}, {"name": "execute", "started_at": "2025-08-28T13:55:57.734136Z", "completed_at": "2025-08-28T13:55:57.846147Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.1735999584197998, "adapter_response": {}, "message": "Database Error in model stg_encounter (models/staging/stg_encounter.sql)\n  invalid input syntax for type timestamp with time zone: \"start\"\n  LINE 25:     (resource ->> 'period' ->> 'start'::timestamptz)\n                                          ^\n  compiled code at target/run/opensrp_mh/models/staging/stg_encounter.sql", "failures": null, "unique_id": "model.opensrp_mh.stg_encounter", "compiled": true, "compiled_code": "select\n    id as fhir_id,\n    resource,\n    resource ->> 'id'                                 as resource_id,\n    resource ->> 'status'                             as status,\n    resource -> 'class' ->> 'code'                    as class_code,\n    resource -> 'type'  -> 0 -> 'coding' -> 0 ->> 'code' as type_code,\n    resource -> 'type'  -> 0 -> 'coding' -> 0 ->> 'display' as type_display,\n    \n    -- ref_text looks like 'Patient/123' -> return '123'\n    (regexp_replace(resource -> 'subject' ->> 'reference', '^\\w+/', ''))\n as patient_id,\n    \n    -- ref_text looks like 'Patient/123' -> return '123'\n    (regexp_replace(resource -> 'participant' -> 0 -> 'individual' ->> 'reference', '^\\w+/', ''))\n as practitioner_id,\n    \n    -- Handle ISO strings from FHIR meta/fields safely\n    (resource ->> 'period' ->> 'start'::timestamptz)\n as period_start,\n    \n    -- Handle ISO strings from FHIR meta/fields safely\n    (resource ->> 'period' ->> 'end'::timestamptz)\n   as period_end,\n    \n    -- Handle ISO strings from FHIR meta/fields safely\n    (lastUpdated::timestamptz)\n                       as lastUpdated_ts,\n    _airbyte_extracted_at\nfrom \"data_warehouse\".\"airbyte\".\"encounter\"", "relation_name": "\"data_warehouse\".\"engage_analytics_stg\".\"stg_encounter\"", "batch_results": null}, {"status": "skipped", "timing": [], "thread_id": "Thread-3 (worker)", "execution_time": 0, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.opensrp_mh.dim_patient", "compiled": false, "compiled_code": null, "relation_name": "\"data_warehouse\".\"engage_analytics_mart\".\"dim_patient\"", "batch_results": null}, {"status": "skipped", "timing": [], "thread_id": "Thread-4 (worker)", "execution_time": 0, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.opensrp_mh.dim_practitioner", "compiled": false, "compiled_code": null, "relation_name": "\"data_warehouse\".\"engage_analytics_mart\".\"dim_practitioner\"", "batch_results": null}, {"status": "skipped", "timing": [], "thread_id": "Thread-3 (worker)", "execution_time": 0, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.opensrp_mh.int_qr_answers_long", "compiled": false, "compiled_code": null, "relation_name": "\"data_warehouse\".\"engage_analytics_int\".\"int_qr_answers_long\"", "batch_results": null}, {"status": "skipped", "timing": [], "thread_id": "Thread-1 (worker)", "execution_time": 0, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.opensrp_mh.fact_encounter", "compiled": false, "compiled_code": null, "relation_name": "\"data_warehouse\".\"engage_analytics_mart\".\"fact_encounter\"", "batch_results": null}, {"status": "skipped", "timing": [], "thread_id": "Thread-4 (worker)", "execution_time": 0, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.opensrp_mh.fact_qr_latest_scores", "compiled": false, "compiled_code": null, "relation_name": "\"data_warehouse\".\"engage_analytics_mart\".\"fact_qr_latest_scores\"", "batch_results": null}, {"status": "skipped", "timing": [], "thread_id": "Thread-3 (worker)", "execution_time": 0, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.opensrp_mh.core_counts", "compiled": false, "compiled_code": null, "relation_name": "\"data_warehouse\".\"engage_analytics_mart\".\"core_counts\"", "batch_results": null}, {"status": "skipped", "timing": [], "thread_id": "Thread-1 (worker)", "execution_time": 0, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.opensrp_mh.patients_no_followup", "compiled": false, "compiled_code": null, "relation_name": "\"data_warehouse\".\"engage_analytics_mart\".\"patients_no_followup\"", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-08-28T13:55:57.869676Z", "completed_at": "2025-08-28T13:55:57.869684Z"}, {"name": "execute", "started_at": "2025-08-28T13:55:57.872451Z", "completed_at": "2025-08-28T13:55:57.981646Z"}], "thread_id": "Thread-2 (worker)", "execution_time": 0.11818361282348633, "adapter_response": {"_message": "INSERT 4", "code": "INSERT", "rows_affected": 4}, "message": "INSERT 4", "failures": null, "unique_id": "seed.opensrp_mh.score_map", "compiled": null, "compiled_code": null, "relation_name": null, "batch_results": null}, {"status": "skipped", "timing": [], "thread_id": "Thread-4 (worker)", "execution_time": 0, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.opensrp_mh.int_qr_answers_scored", "compiled": false, "compiled_code": null, "relation_name": "\"data_warehouse\".\"engage_analytics_int\".\"int_qr_answers_scored\"", "batch_results": null}], "elapsed_time": 0.66109299659729, "args": {"require_all_warnings_handled_by_warn_error": false, "target": "prod", "resource_types": [], "introspect": true, "export_saved_queries": false, "log_level": "info", "state_modified_compare_more_unrendered_values": false, "macro_debugging": false, "use_fast_test_edges": false, "exclude": [], "require_batched_execution_for_custom_microbatch_strategy": false, "source_freshness_run_project_hooks": true, "show_resource_report": false, "favor_state": false, "partial_parse": true, "log_path": "/home/dbt/fhir-analytics-repo/engage-analytics/dbt/logs", "require_generic_test_arguments_property": true, "use_colors_file": true, "profiles_dir": "/home/dbt/.dbt", "exclude_resource_types": [], "skip_nodes_if_on_run_start_fails": false, "require_resource_names_without_spaces": true, "defer": false, "validate_macro_args": false, "warn_error_options": {"error": [], "warn": [], "silence": []}, "use_colors": true, "partial_parse_file_diff": true, "printer_width": 80, "select": [], "show": false, "populate_cache": true, "vars": {}, "write_json": true, "log_level_file": "debug", "log_file_max_bytes": 10485760, "project_dir": "/home/dbt/fhir-analytics-repo/engage-analytics/dbt", "require_explicit_package_overrides_for_builtin_materializations": true, "print": true, "require_nested_cumulative_type_params": false, "static_parser": true, "log_format": "default", "include_saved_query": false, "strict_mode": false, "version_check": true, "require_yaml_configuration_for_mf_time_spines": false, "cache_selected_only": false, "quiet": false, "send_anonymous_usage_stats": true, "state_modified_compare_vars": false, "empty": false, "upload_to_artifacts_ingest_api": false, "which": "build", "log_format_file": "debug", "show_all_deprecations": false, "indirect_selection": "eager", "invocation_command": "dbt build"}}